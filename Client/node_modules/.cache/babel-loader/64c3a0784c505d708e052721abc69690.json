{"ast":null,"code":"import _regeneratorRuntime from\"/Users/irafalko/Desktop/MERN_Blog/project/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/irafalko/Desktop/MERN_Blog/project/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/irafalko/Desktop/MERN_Blog/project/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import\"./singlePost.css\";import{useLocation}from\"react-router\";import axios from\"axios\";import{useEffect,useState,useContext}from\"react\";import{Link}from\"react-router-dom\";import{Context}from\"../../context/Context\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function SinglePost(){var location=useLocation();var path=location.pathname.split(\"/\")[2];var _useState=useState({}),_useState2=_slicedToArray(_useState,2),post=_useState2[0],setPost=_useState2[1];var PF=\"http://localhost:5000/images/\";var _useContext=useContext(Context),user=_useContext.user;var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),title=_useState4[0],setTitle=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),description=_useState6[0],setDescription=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),updateMode=_useState8[0],setUpdateMode=_useState8[1];useEffect(function(){var getPost=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"/posts/\"+path);case 2:res=_context.sent;setPost(res.data);setTitle(res.data.title);setDescription(res.data.description);case 6:case\"end\":return _context.stop();}}},_callee);}));return function getPost(){return _ref.apply(this,arguments);};}();getPost();},[path]);var handleDelete=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.delete(\"/posts/\"+path,{data:{username:user.username}});case 3:window.location.replace(\"/\");_context2.next=8;break;case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](0);case 8:case\"end\":return _context2.stop();}}},_callee2,null,[[0,6]]);}));return function handleDelete(){return _ref2.apply(this,arguments);};}();var handleUpdate=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.put(\"/posts/\"+path,{username:user.username,title:title,description:description});case 3:// window.location.reload();\nsetUpdateMode(false);_context3.next=8;break;case 6:_context3.prev=6;_context3.t0=_context3[\"catch\"](0);case 8:case\"end\":return _context3.stop();}}},_callee3,null,[[0,6]]);}));return function handleUpdate(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"singlePost\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"singlePostWrapper\",children:[post.photo&&/*#__PURE__*/_jsx(\"img\",{className:\"singlePostImage\",src:PF+post.photo,alt:\"food image\"}),updateMode?/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:title,className:\"singlePostTitleInput\",onChange:function onChange(e){return setTitle(e.target.value);}}):/*#__PURE__*/_jsxs(\"h1\",{className:\"singlePostTitle\",children:[title,post.username===(user===null||user===void 0?void 0:user.username)&&/*#__PURE__*/_jsxs(\"div\",{className:\"singlePostEdit\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"singlePostIcon far fa-edit\",onClick:function onClick(){return setUpdateMode(true);}}),/*#__PURE__*/_jsx(\"i\",{className:\"singlePostIcon far fa-trash-alt\",onClick:handleDelete})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"singlePostInfo\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"sinlePostAuthor\",children:[\"Author:\",/*#__PURE__*/_jsx(Link,{style:{color:\"inherit\",textDecoration:\"none\"},to:\"/?user=\".concat(post.username),children:/*#__PURE__*/_jsx(\"b\",{children:post.username})})]}),/*#__PURE__*/_jsx(\"span\",{className:\"sinlePostDate\",children:new Date(post.createdAt).toDateString()})]}),updateMode?/*#__PURE__*/_jsx(\"textarea\",{className:\"singlePostDescriptionInput\",value:description,onChange:function onChange(e){return setDescription(e.target.value);}}):/*#__PURE__*/_jsx(\"div\",{className:\"singlePostDescription \",children:/*#__PURE__*/_jsx(\"p\",{className:\"par\",children:description})})]}),updateMode&&/*#__PURE__*/_jsx(\"button\",{className:\"singlePostButton\",onClick:handleUpdate,children:\"UPDATE\"})]});}","map":{"version":3,"sources":["/Users/irafalko/Desktop/MERN_Blog/project/Client/src/components/singlePost/SinglePost.jsx"],"names":["useLocation","axios","useEffect","useState","useContext","Link","Context","SinglePost","location","path","pathname","split","post","setPost","PF","user","title","setTitle","description","setDescription","updateMode","setUpdateMode","getPost","get","res","data","handleDelete","delete","username","window","replace","handleUpdate","put","photo","e","target","value","color","textDecoration","Date","createdAt","toDateString"],"mappings":"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","sourcesContent":["import \"./singlePost.css\";\nimport { useLocation } from \"react-router\";\nimport axios from \"axios\";\nimport { useEffect, useState, useContext } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Context } from \"../../context/Context\";\n\nexport default function SinglePost() {\n  const location = useLocation();\n  const path = location.pathname.split(\"/\")[2];\n  const [post, setPost] = useState({});\n  const PF = \"http://localhost:5000/images/\";\n  const { user } = useContext(Context);\n  const [title, setTitle] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [updateMode, setUpdateMode] = useState(false);\n\n  useEffect(() => {\n    const getPost = async () => {\n      const res = await axios.get(\"/posts/\" + path);\n      setPost(res.data);\n      setTitle(res.data.title);\n      setDescription(res.data.description);\n    };\n    getPost();\n  }, [path]);\n\n  const handleDelete = async () => {\n    try {\n      await axios.delete(\"/posts/\" + path, {\n        data: { username: user.username },\n      });\n      window.location.replace(`/`);\n    } catch (err) {}\n  };\n\n  const handleUpdate = async () => {\n    try {\n      await axios.put(\"/posts/\" + path, {\n        username: user.username,\n        title,\n        description,\n      });\n      // window.location.reload();\n      setUpdateMode(false);\n    } catch (err) {}\n  };\n\n  return (\n    <div className=\"singlePost\">\n      <div className=\"singlePostWrapper\">\n        {post.photo && (\n          <img\n            className=\"singlePostImage\"\n            src={PF + post.photo}\n            alt=\"food image\"\n          />\n        )}\n        {updateMode ? (\n          <input\n            type=\"text\"\n            value={title}\n            className=\"singlePostTitleInput\"\n            onChange={(e) => setTitle(e.target.value)}\n          />\n        ) : (\n          <h1 className=\"singlePostTitle\">\n            {title}\n            {post.username === user?.username && (\n              <div className=\"singlePostEdit\">\n                <i\n                  className=\"singlePostIcon far fa-edit\"\n                  onClick={() => setUpdateMode(true)}\n                ></i>\n                <i\n                  className=\"singlePostIcon far fa-trash-alt\"\n                  onClick={handleDelete}\n                ></i>\n              </div>\n            )}\n          </h1>\n        )}\n\n        <div className=\"singlePostInfo\">\n          <span className=\"sinlePostAuthor\">\n            Author:\n            <Link\n              style={{ color: \"inherit\", textDecoration: \"none\" }}\n              to={`/?user=${post.username}`}\n            >\n              <b>{post.username}</b>\n            </Link>\n          </span>\n          <span className=\"sinlePostDate\">\n            {new Date(post.createdAt).toDateString()}\n          </span>\n        </div>\n        {updateMode ? (\n          <textarea\n            className=\"singlePostDescriptionInput\"\n            value={description}\n            onChange={(e) => setDescription(e.target.value)}\n          />\n        ) : (\n          <div className=\"singlePostDescription \">\n            <p className=\"par\">{description}</p>\n          </div>\n        )}\n      </div>\n      {updateMode && (\n        <button className=\"singlePostButton\" onClick={handleUpdate}>\n          UPDATE\n        </button>\n      )}\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}